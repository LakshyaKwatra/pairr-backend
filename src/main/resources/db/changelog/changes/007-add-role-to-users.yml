databaseChangeLog:
  - changeSet:
      id: 007-add-role-to-users
      author: pairr
      changes:
        # Add column (nullable first)
        - addColumn:
            tableName: users
            columns:
              - column:
                  name: role
                  type: varchar(20)

        # Backfill existing users
        - update:
            tableName: users
            columns:
              - column:
                  name: role
                  value: USER
            where: role IS NULL

        # Add NOT NULL constraint
        - addNotNullConstraint:
            tableName: users
            columnName: role
            columnDataType: varchar(20)

